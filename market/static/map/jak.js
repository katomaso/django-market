"object"!=typeof window.JAK&&(window.JAK={NAME:"JAK",_idCnt:0});JAK.idGenerator=function(){this._idCnt=this._idCnt<1E7?this._idCnt:0;var a="m"+(new Date).getTime().toString(16)+"m"+this._idCnt.toString(16);this._idCnt++;return a};Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}});Date.now||(Date.now=function(){return+new Date});
Object.create||(Object.create=function(a){if(arguments.length>1)throw Error("Object.create polyfill only accepts the first parameter");var b=function(){};b.prototype=a;return new b});Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){var c=this.length,d=b||0;for(d<0&&(d=d+c);d<c;d++)if(d in this&&this[d]===a)return d;return-1});Array.indexOf||(Array.indexOf=function(a,b,c){return Array.prototype.indexOf.call(a,b,c)});
Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(a,b){var c=this.length,d=b===void 0?c-1:b;for(d<0&&(d=d+c);d>-1;d--)if(d in this&&this[d]===a)return d;return-1});Array.lastIndexOf||(Array.lastIndexOf=function(a,b,c){return arguments.length>2?Array.prototype.lastIndexOf.call(a,b,c):Array.prototype.lastIndexOf.call(a,b)});Array.prototype.forEach||(Array.prototype.forEach=function(a,b){for(var c=this.length,d=0;d<c;d++)d in this&&a.call(b,this[d],d,this)});
Array.forEach||(Array.forEach=function(a,b,c){Array.prototype.forEach.call(a,b,c)});Array.prototype.every||(Array.prototype.every=function(a,b){for(var c=this.length,d=0;d<c;d++)if(d in this&&!a.call(b,this[d],d,this))return false;return true});Array.every||(Array.every=function(a,b,c){return Array.prototype.every.call(a,b,c)});Array.prototype.some||(Array.prototype.some=function(a,b){for(var c=this.length,d=0;d<c;d++)if(d in this&&a.call(b,this[d],d,this))return true;return false});
Array.some||(Array.some=function(a,b,c){return Array.prototype.some.call(a,b,c)});Array.prototype.map||(Array.prototype.map=function(a,b){for(var c=this.length,d=Array(c),e=0;e<c;e++)e in this&&(d[e]=a.call(b,this[e],e,this));return d});Array.map||(Array.map=function(a,b,c){return Array.prototype.map.call(a,b,c)});Array.prototype.filter||(Array.prototype.filter=function(a,b){for(var c=this.length,d=[],e=0;e<c;e++)if(e in this){var f=this[e];a.call(b,f,e,this)&&d.push(f)}return d});
Array.filter||(Array.filter=function(a,b,c){return Array.prototype.filter.call(a,b,c)});String.prototype.lpad=function(a,b){for(var c=a||"0",d=b||2,e="";e.length<d-this.length;)e=e+c;e=e.substring(0,d-this.length);return e+this.toString()};String.prototype.rpad=function(a,b){for(var c=a||"0",d=b||2,e="";e.length<d-this.length;)e=e+c;e=e.substring(0,d-this.length);return this.toString()+e};String.prototype.trim=function(){return this.match(/^\s*([\s\S]*?)\s*$/)[1]};String.trim||(String.trim=function(a){return String.prototype.trim.call(a)});
String.prototype.CS_ALPHABET="0123456789A\u00c1BC\u010cD\u010eE\u011a\u00c9FGHCHI\u00cdJKLMN\u0147O\u00d3PQR\u0158S\u0160T\u0164U\u00da\u016eVWXY\u00ddZ\u017da\u00e1bc\u010dd\u010fe\u011b\u00e9fghchi\u00edjklmn\u0148o\u00f3pqr\u0159s\u0161t\u0165u\u00fa\u016fvwxy\u00fdz\u017e";
String.prototype.localeCSCompare=function(a){a=a+"";if(this+""===a)return 0;if(this.length<a.length)return-a.localeCSCompare(this);for(var b=0,c=0,d=a.length,e="",f="",g=0,i=0;b<d;){e=a.charAt(b);f=this.charAt(c);if(f.toLowerCase()=="c"){g=this.substring(c,c+2);if(g=="ch"||g=="CH"){c++;f=g}}if(e.toLowerCase()=="c"){g=a.substring(b,b+2);if(g=="ch"||g=="CH"){b++;e=g}}g=this.CS_ALPHABET.indexOf(e);i=this.CS_ALPHABET.indexOf(f);if(e!=f)break;b++;c++}return b==d?1:g==i?f.localeCompare(e):i==-1?-1:g==-1?
1:i-g};Date.prototype.toISOString||function(){function a(a){a=""+a;a.length===1&&(a="0"+a);return a}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(""+(this.getUTCMilliseconds()/1E3).toFixed(3)).slice(2,5)+"Z"}}();Date.prototype._dayNames="Pond\u011bl\u00ed \u00dater\u00fd St\u0159eda \u010ctvrtek P\u00e1tek Sobota Ned\u011ble".split(" ");
Date.prototype._dayNamesShort="Po \u00dat St \u010ct P\u00e1 So Ne".split(" ");Date.prototype._monthNames="Leden \u00danor B\u0159ezen Duben Kv\u011bten \u010cerven \u010cervenec Srpen Z\u00e1\u0159\u00ed \u0158\u00edjen Listopad Prosinec".split(" ");Date.prototype._monthNamesShort="Led \u00dano B\u0159e Dub Kv\u011b \u010cer \u010crc Srp Z\u00e1\u0159 \u0158\u00edj Lis Pro".split(" ");
Date.prototype.format=function(a){for(var b={1:"st",2:"nd",3:"rd",21:"st",22:"nd",23:"rd",31:"st"},c="",d=false,e=0;e<a.length;e++){var f=a.charAt(e);if(d){d=false;c=c+f}else switch(f){case "\\":if(d){d=false;c=c+f}else d=true;break;case "d":c=c+this.getDate().toString().lpad();break;case "j":c=c+this.getDate();break;case "w":c=c+this.getDay();break;case "N":c=c+(this.getDay()||7);break;case "S":f=this.getDate();c=c+(b[f]||"th");break;case "D":c=c+this._dayNamesShort[(this.getDay()||7)-1];break;case "l":c=
c+this._dayNames[(this.getDay()||7)-1];break;case "z":var g=this.getTime(),f=new Date(g);f.setDate(1);f.setMonth(0);f=g-f.getTime();c=c+f/864E5;break;case "W":var f=new Date(this.getFullYear(),this.getMonth(),this.getDate()),i=f.getDay()||7;f.setDate(f.getDate()+(4-i));g=f.getFullYear();i=Math.floor((f.getTime()-(new Date(g,0,1,-6)).getTime())/864E5);c=c+(1+Math.floor(i/7)).toString().lpad();break;case "m":c=c+(this.getMonth()+1).toString().lpad();break;case "n":c=c+(this.getMonth()+1);break;case "M":c=
c+this._monthNamesShort[this.getMonth()];break;case "F":c=c+this._monthNames[this.getMonth()];break;case "t":var g=this.getTime(),j=this.getMonth(),f=new Date(g);do{i=f.getDate();g=g+864E5;f=new Date(g)}while(j==f.getMonth());c=c+i;break;case "L":f=new Date(this.getTime());f.setDate(1);f.setMonth(1);f.setDate(29);c=c+(f.getMonth()==1?"1":"0");break;case "Y":c=c+this.getFullYear().toString().lpad();break;case "y":c=c+this.getFullYear().toString().lpad().substring(2);break;case "a":c=c+(this.getHours()<
12?"am":"pm");break;case "A":c=c+(this.getHours()<12?"AM":"PM");break;case "G":c=c+this.getHours();break;case "H":c=c+this.getHours().toString().lpad();break;case "g":c=c+this.getHours()%12;break;case "h":c=c+(this.getHours()%12).toString().lpad();break;case "i":c=c+this.getMinutes().toString().lpad();break;case "s":c=c+this.getSeconds().toString().lpad();break;case "Z":c=c+-60*this.getTimezoneOffset();break;case "O":case "P":g=this.getTimezoneOffset()/-60;i=Math.abs(g).toString().lpad();f=="P"&&
(i=i+":");i=i+"00";c=c+((g>=0?"+":"-")+i);break;case "U":c=c+this.getTime()/1E3;break;case "u":c=c+"0";break;case "c":c=c+(arguments.callee.call(this,"Y-m-d")+"T"+arguments.callee.call(this,"H:i:sP"));break;case "r":c=c+arguments.callee.call(this,"D, j M Y H:i:s O");break;default:c=c+f}}return c};
window.JSON||function(){var a={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},b="[",c;for(c in a)b=b+("\\"+c);var b=b+"]",b=RegExp(b,"g"),d=function(c){return'"'+c.replace(b,function(b){return a[b]})+'"'},e=function(a,b,c,e){var k=Array(e+1).join(c);if(a===null)return"null";switch(typeof a){case "string":return d(a);case "boolean":case "number":return a.toString();case "object":var h="";if(a instanceof Date)h=d(a.toISOString());else if(a instanceof Array){for(var h=
h+"[",l=0;l<a.length;l++){var m=a[l];if(l>0){h=h+",";c.length&&(h=h+("\n"+k+c))}h=h+arguments.callee(m,b,c,e+1)}a.length>1&&c.length&&(h=h+("\n"+k));h=h+"]"}else{var h=h+"{",l=0,n;for(n in a){m=a[n];l>0&&(h=h+",");c.length&&(h=h+("\n"+k+c));h=h+(d(n)+":"+arguments.callee(m,b,c,e+1));l++}l>0&&c.length&&(h=h+("\n"+k));h=h+"}"}return h;default:return"undefined"}};window.JSON={parse:function(a){return eval("("+a+")")},stringify:function(a,b,c){var d="";typeof c=="number"&&c>1?d=Array(c+1).join(" "):typeof c==
"string"&&(d=c);return e(a,b,d,0)}}}();JAK.ClassMaker={};JAK.ClassMaker.VERSION="5.1";JAK.ClassMaker.NAME="JAK.ClassMaker";JAK.ClassMaker.makeClass=function(a){return this._addConstructorProperties(function(){this.$constructor&&this.$constructor.apply(this,arguments)},this._makeDefaultParams(a))};
JAK.ClassMaker.makeSingleton=function(a){var a=this._makeDefaultParams(a),b=function(){throw Error("Cannot instantiate singleton class");};b._instance=null;b.getInstance=this._getInstance;return this._addConstructorProperties(b,a)};JAK.ClassMaker.makeInterface=function(a){return this._addConstructorProperties(function(){throw Error("Cannot instantiate interface");},this._makeDefaultParams(a))};
JAK.ClassMaker.makeStatic=function(a){var a=this._makeDefaultParams(a),b={};b.VERSION=a.VERSION;b.NAME=a.NAME;return b};
JAK.ClassMaker._makeDefaultParams=function(a){if("EXTEND"in a){if(!a.EXTEND)throw Error("Cannot extend non-exist class");if(!("NAME"in a.EXTEND))throw Error("Cannot extend non-JAK class");}a.NAME=a.NAME||false;a.VERSION=a.VERSION||"1.0";a.EXTEND=a.EXTEND||false;a.IMPLEMENT=a.IMPLEMENT||[];a.DEPEND=a.DEPEND||[];if(!(a.IMPLEMENT instanceof Array))a.IMPLEMENT=[a.IMPLEMENT];this._preMakeTests(a);return a};
JAK.ClassMaker._preMakeTests=function(a){if(!a.NAME)throw Error("No NAME passed to JAK.ClassMaker.makeClass()");var b=false;if(b=this._testDepend(a.DEPEND))throw Error("Dependency error in class "+a.NAME+" ("+b+")");};JAK.ClassMaker._addConstructorProperties=function(a,b){for(var c in b)a[c]=b[c];this._setInheritance(a);a.prototype.constructor=a;a.prototype.$super=this._$super;return a};
JAK.ClassMaker._getInstance=function(){if(!this._instance){this._instance=Object.create(this.prototype);"$constructor"in this.prototype&&this._instance.$constructor()}return this._instance};JAK.ClassMaker._setInheritance=function(a){a.EXTEND&&this._makeInheritance(a,a.EXTEND);for(var b=0;b<a.IMPLEMENT.length;b++)this._makeInheritance(a,a.IMPLEMENT[b],true)};
JAK.ClassMaker._makeInheritance=function(a,b,c){for(var d in b.prototype){var e=b.prototype[d];if(typeof e=="function"&&!e.owner)e.owner=b}if(c)for(d in b.prototype)a.prototype[d]=typeof b.prototype[d]=="object"?JSON.parse(JSON.stringify(b.prototype[d])):b.prototype[d];else{a.prototype=Object.create(b.prototype);for(d in b.prototype)typeof b.prototype[d]=="object"&&(a.prototype[d]=JSON.parse(JSON.stringify(b.prototype[d])))}};
JAK.ClassMaker._testDepend=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(!c.sClass)return"Unsatisfied dependency";if(!c.ver)return"Version not specified in dependency";var d=c.sClass.VERSION.split(".")[0],e=c.ver.split(".")[0];if(d!=e)return"Version conflict in "+c.sClass.NAME}return false};
JAK.ClassMaker._$super=function(){var a=arguments.callee.caller;if(!a)throw Error("Function.prototype.caller not supported");var b=a.owner||this.constructor,c=false,d;for(d in b.prototype)if(b.prototype[d]==a){c=d;break}if(!c)throw Error("Cannot find supplied method in constructor");a=b.EXTEND;if(!a)throw Error("No super-class available");if(!a.prototype[c])throw Error("Super-class doesn't have method '"+c+"'");return a.prototype[c].apply(this,arguments)};
JAK.Events=JAK.ClassMaker.makeStatic({NAME:"JAK.Events",VERSION:"3.0"});JAK.Events._eventFolder={};JAK.Events._domReadyTimer=null;JAK.Events._domReadyCallback=[];JAK.Events._domReadyAlreadyRun=!1;JAK.Events._windowLoadListenerId=!1;JAK.Events.onDomReady=function(a,b){JAK.Events._domReadyCallback[JAK.Events._domReadyCallback.length]={obj:a,func:b};JAK.Events._onDomReady()};
JAK.Events._onDomReady=function(){if(/Safari/i.test(navigator.userAgent)||/WebKit|Khtml/i.test(navigator.userAgent))JAK.Events._domReadyTimer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(JAK.Events._domReadyTimer);JAK.Events._domReady()}},10);else if(document.all&&!window.opera)if(window.parent==window){try{document.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,1);return}JAK.Events._domReady()}else JAK.Events._windowLoadListenerId=JAK.Events.addListener(window,
"load",window,function(){JAK.Events._domReady()});else document.addEventListener?document.addEventListener("DOMContentLoaded",JAK.Events._domReady,false):JAK.Events._windowLoadListenerId=JAK.Events.addListener(window,"load",window,function(){JAK.Events._domReady()})};
JAK.Events._domReady=function(){if(!JAK.Events._domReadyAlreadyRun){JAK.Events._domReadyAlreadyRun=true;document.addEventListener&&document.removeEventListener("DOMContentLoaded",JAK.Events._domReady,true);if(JAK.Events._windowLoadListenerId){JAK.Events.removeListener(JAK.Events._windowLoadListenerId);JAK.Events._windowLoadListenerId=false}for(var a=0;a<JAK.Events._domReadyCallback.length;a++){var b=JAK.Events._domReadyCallback[a];if(typeof b.func=="string")b.obj[b.func]();else b.func.apply(b.obj,
[])}JAK.Events._domReadyCallback=[]}};JAK.Events.addListener=function(a,b,c,d,e){var e=e||false,f=null,g=JAK.idGenerator();if(arguments.length>3){if(typeof d=="string"&&typeof c[d]!="function")throw Error("Events.addListener: arguments[3] must be method of arguments[2]");f=this._getMethod(c,d,a,g)}else f=this._getMethod(window,c,a,g);this._addListener(a,b,f,e);this._eventFolder[g]={elm:a,type:b,action:f,capture:e,obj:c,func:d};return g};
JAK.Events._addListener=function(a,b,c,d){for(var b=b.split(" "),e=0;e<b.length;e++){var f=b[e];if(document.addEventListener)a.addEventListener(f,c,d);else if(document.attachEvent)a.attachEvent("on"+f,c);else throw Error("This browser can not handle events");}};JAK.Events._getMethod=function(a,b,c,d){var e=typeof b=="string"?a[b]:b;return function(b){return e.call(a,b,c,d)}};
JAK.Events.removeListener=function(a){if(!(a in this._eventFolder))throw Error("Cannot remove non-existent event ID '"+a+"'");var b=this._eventFolder[a];this._removeListener(b.elm,b.type,b.action,b.capture);delete this._eventFolder[a]};JAK.Events._removeListener=function(a,b,c,d){for(var b=b.split(" "),e=0;e<b.length;e++){var f=b[e];document.removeEventListener?a.removeEventListener(f,c,d):document.detachEvent&&a.detachEvent("on"+f,c)}};JAK.Events.removeListeners=function(a){for(;a.length;)this.removeListener(a.shift())};
JAK.Events.removeAllListeners=function(){for(var a in this._eventFolder)this.removeListener(a)};JAK.Events.stopEvent=function(a){a=a||window.event;a.stopPropagation?a.stopPropagation():a.cancelBubble=true};JAK.Events.cancelDef=function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=false};JAK.Events.getTarget=function(a){a=a||window.event;return a.target||a.srcElement};
JAK.Events.getInfo=function(){var a=[],b=[],c=[],d;for(d in JAK.Events._eventFolder){var e=JAK.Events._eventFolder[d],f=e.elm,g=b.indexOf(f);if(g==-1){g=b.push(f)-1;c[g]=[]}c[g].push(e)}for(d=0;d<b.length;d++){f=[];for(g=0;g<c[d].length;g++){var e=c[d][g],i=e.obj||window,j=e.func||e.obj;f.push({sType:e.type,bRemoved:false,sFunction:(i!=window&&i.constructor?"["+i.constructor.NAME+"]":"")+(typeof j=="string"?"."+j+" = "+i[j].toString():" "+j.toString())})}a.push({sSource:"JAK",nNode:b[d],aListeners:f})}return a};
JAK.Browser=JAK.ClassMaker.makeStatic({NAME:"JAK.Browser",VERSION:"3.0"});JAK.Browser.platform="";JAK.Browser.client="";JAK.Browser.version=0;JAK.Browser.agent="";JAK.Browser.mouse={};
JAK.Browser._getPlatform=function(){return this._agent.indexOf("iPhone")!=-1||this._agent.indexOf("iPod")!=-1||this._agent.indexOf("iPad")!=-1?"ios":this._agent.indexOf("Android")!=-1?"and":this._agent.indexOf("X11")!=-1||this._agent.indexOf("Linux")!=-1?"nix":this._agent.indexOf("Mac")!=-1?"mac":this._agent.indexOf("Win")!=-1?"win":"oth"};
JAK.Browser._getClient=function(){return window.opera?"opera":window.chrome?"chrome":document.attachEvent&&typeof navigator.systemLanguage!="undefined"?"ie":document.getAnonymousElementByAttribute?"gecko":this._agent.indexOf("KHTML")!=-1?this._vendor=="KDE"?"konqueror":"safari":"oth"};
JAK.Browser._getMouse=function(){var a,b;if(JAK.Browser.client=="ie"&&parseFloat(JAK.Browser.version)<9){a=1;b=4}else if(JAK.Browser.client=="konqueror")if(parseFloat(JAK.Browser.version)<4){a=1;b=4}else{a=0;b=1}else if(JAK.Browser.client=="opera"&&JAK.Browser.version>7&&JAK.Browser.version<9){a=1;b=4}else if(JAK.Browser.client=="safari")if(parseInt(JAK.Browser.version)>2)b=a=0;else b=a=1;else{a=0;b=1}return{left:a,right:2,middle:b}};
JAK.Browser._getVersion=function(){var a="_get_"+this.client+"_ver";return typeof this[a]=="function"?this[a]():0};JAK.Browser._get_ie_ver=function(){return typeof Function.prototype.call!="undefined"?"draggable"in document.createElement("div")?"10":document.addEventListener?"9":Object.prototype.toString.call(window.JSON)==="[object JSON]"?"8":window.XMLHttpRequest?"7":typeof document.doctype=="object"?"6":"5.5":"5.0"};
JAK.Browser._get_opera_ver=function(){return window.opera.version?window.opera.version():document.createComment?"7":"6"};JAK.Browser._get_gecko_ver=function(){return"textOverflow"in document.createElement("div").style?"7":window.EventSource?"6":"onloadend"in new XMLHttpRequest?"5":history.pushState?"4":document.getBoxObjectFor===void 0?"3.6":navigator.geolocation?"3.5":document.getElementsByClassName?"3":window.external?"2":"1.5"};
JAK.Browser._get_konqueror_ver=function(){var a=this._agent.substring(this._agent.indexOf("KHTML")+6),b=a.indexOf(" ");return a.substring(0,b-2)};JAK.Browser._get_safari_ver=function(){var a=this._agent.match(/version\/([0-9]+)/i);return a?a[1]:"3"};JAK.Browser._get_chrome_ver=function(){var a=this._agent.match(/Chrome\/([0-9]+)/i);return a?a[1]:null};
JAK.Browser.isOld=function(){if(this.client=="ie"&&parseFloat(this.version)<=5.5||this.client=="opera"&&parseFloat(this.version)<9.5||this.client=="gecko"&&parseFloat(this.version)<2||this.client=="konqueror"&&parseFloat(this.version)<3.5||!document.documentElement||!document.documentElement.addEventListener&&!document.documentElement.attachEvent)return true;var a=function(){};return!a.call||!a.apply?true:false};
JAK.Browser.getBrowser=function(){this._agent=this.agent=navigator.userAgent;this._platform=navigator.platform;this._vendor=navigator.vendor;this.platform=this._getPlatform();this.client=this._getClient();this.version=this._getVersion();this.mouse=this._getMouse()};JAK.Browser.getBrowser();JAK.DOM=JAK.ClassMaker.makeStatic({NAME:"JAK.DOM",VERSION:"5.0"});JAK.cel=function(a,b,c,d){a=(d||document).createElement(a);if(b)a.className=b;if(c)a.id=c;return a};
JAK.mel=function(a,b,c,d){a=(d||document).createElement(a);if(b)for(var e in b)a[e]=b[e];c&&JAK.DOM.setStyle(a,c);return a};JAK.ctext=function(a,b){return(b||document).createTextNode(a)};JAK.gel=function(a,b){var c=b||document;return typeof a=="string"?c.getElementById(a):a};
JAK.query=function(a,b){for(var c=function(a,b){for(var c=[],d=0;d<a.length;d++){for(var e=a[d],f=true,g=0;g<b.length;g++){var h=b[g],i=h.charAt(0),h=h.substr(1).toLowerCase();i=="#"&&h!=e.id.toLowerCase()&&(f=false);i=="."&&!JAK.DOM.hasClass(e,h)&&(f=false)}f&&c.push(e)}return c},d=[],b=b||document,e=a.split(",");e.length;){for(var f=e.shift().trim().split(/ +/),g=[b],i=0;i<f.length;i++){for(var j=[],k=f[i],h=k.match(/^[a-z0-9]*/i)[0]||"*",k=k.match(/[\.#][^\.#]+/g)||[];g.length;)var l=g.shift().getElementsByTagName(h),
j=j.concat(c(l,k));g=j}for(i=0;i<g.length;i++){f=g[i];d.indexOf(f)==-1&&d.push(f)}}return d};JAK.DOM.append=function(){for(var a=0;a<arguments.length;a++)for(var b=arguments[a],c=b[0],d=1;d<b.length;d++)c.appendChild(b[d])};JAK.DOM.hasClass=function(a,b){for(var c=a.className.split(" "),d=0;d<c.length;d++)if(c[d].toLowerCase()==b.toLowerCase())return true;return false};JAK.DOM.addClass=function(a,b){if(!JAK.DOM.hasClass(a,b))a.className=a.className+(" "+b)};
JAK.DOM.removeClass=function(a,b){for(var c=a.className.split(" "),d=[],e=0;e<c.length;e++)c[e].toLowerCase()!=b.toLowerCase()&&d.push(c[e]);a.className=d.join(" ")};JAK.DOM.clear=function(a){for(;a.firstChild;)a.removeChild(a.firstChild)};
JAK.DOM.getDocSize=function(){var a=0,b=0;if(document.compatMode!="BackCompat"){if(document.documentElement.clientWidth&&JAK.Browser.client!="opera"){a=document.documentElement.clientWidth;b=document.documentElement.clientHeight}else if(JAK.Browser.client=="opera")if(parseFloat(JAK.Browser.version)<9.5){a=document.body.clientWidth;b=document.body.clientHeight}else{a=document.documentElement.clientWidth;b=document.documentElement.clientHeight}if(JAK.Browser.client=="safari"||JAK.Browser.client=="konqueror")b=
window.innerHeight}else{a=document.body.clientWidth;b=document.body.clientHeight}return{width:a,height:b}};
JAK.DOM.getBoxPosition=function(a,b){var c=0,d=0,e=b||a.ownerDocument.body;if(a.getBoundingClientRect&&!b){c=document.documentElement;d=a.getBoundingClientRect();e=JAK.DOM.getBoxScroll(a);return{left:d.left+e.x-c.clientLeft,top:d.top+e.y-c.clientTop}}for(;a&&a!=e;){c=c+a.offsetTop;d=d+a.offsetLeft;if((JAK.Browser.client=="gecko"&&JAK.Browser.version<3||JAK.Browser.client=="safari")&&JAK.DOM.getStyle(a,"position")=="fixed"){e=JAK.DOM.getScrollPos();c=c+e.y;d=d+e.x;break}a=a.offsetParent}return{top:c,
left:d}};JAK.DOM.getPortBoxPosition=function(a,b,c){var d=JAK.DOM.getBoxPosition(a,b,c),a=JAK.DOM.getBoxScroll(a,b,c);d.left=d.left-a.x;d.top=d.top-a.y;return{left:d.left,top:d.top}};
JAK.DOM.getBoxScroll=function(a,b,c){for(var d=0,e=0,f=a.parentNode,a=b||a.ownerDocument.documentElement,b=false;;)if(JAK.Browser.client=="opera"&&f.parentNode&&JAK.DOM.getStyle(f,"display")!="block")f=f.parentNode;else if(JAK.Browser.client=="opera"&&JAK.Browser.version<9.5&&f==document.body)f=f.parentNode;else{c&&JAK.DOM.getStyle(f,"position")=="fixed"&&(b=true);if(!b){d=d+f.scrollLeft;e=e+f.scrollTop}if(f==a)break;f=f.parentNode;if(!f)break}return{x:d,y:e}};
JAK.DOM.getScrollPos=function(){if(document.documentElement.scrollTop||document.documentElement.scrollLeft)var a=document.documentElement.scrollLeft,b=document.documentElement.scrollTop;else if(document.body.scrollTop||document.body.scrollLeft){a=document.body.scrollLeft;b=document.body.scrollTop}else b=a=0;return{x:a,y:b}};JAK.DOM.getStyle=function(a,b){if(document.defaultView&&document.defaultView.getComputedStyle){var c=a.ownerDocument.defaultView.getComputedStyle(a,"");return!c?false:c[b]}return a.currentStyle[b]};
JAK.DOM.setStyle=function(a,b){for(var c in b)a.style[c]=b[c]};JAK.DOM.writeStyle=function(a){var b=JAK.mel("style",{type:"text/css"});b.styleSheet?b.styleSheet.cssText=a:b.appendChild(JAK.ctext(a));a=document.getElementsByTagName("head");if(a.length)a=a[0];else{a=JAK.cel("head");document.documentElement.appendChild(a,document.body)}a.appendChild(b);return b};
JAK.DOM.elementsHider=function(a,b,c){function d(b){for(var c=false;b.parentNode&&b!=document;){b==a&&(c=true);b=b.parentNode}return c}var e=b;e||(e=["select","object","embed","iframe"]);var f=arguments.callee.hidden;if(f){f.forEach(function(a){a.style.visibility="visible"});arguments.callee.hidden=[]}if(c=="hide"){typeof a=="string"&&(a=JAK.gel(a));var f=[],g=this.getBoxPosition(a);g.width=a.offsetWidth+g.left;g.height=a.offsetHeight+g.top;for(var i=0;i<e.length;++i)for(var j=document.getElementsByTagName(e[i]),
k=0;k<j.length;++k){var h=this.getBoxPosition(j[k]);if(!d(j[k])){h.width=j[k].offsetWidth+h.left;h.height=j[k].offsetHeight+h.top;if(!(g.left>h.width||g.width<h.left||g.top>h.height||g.height<h.top)){j[k].style.visibility="hidden";f.push(j[k])}}}arguments.callee.hidden=f}};
JAK.DOM.getElementsByClass=function(a,b,c){if(document.getElementsByClassName&&!c){var d=b||document;return JAK.DOM.arrayFromCollection(d.getElementsByClassName(a))}if(document.querySelectorAll&&!c){d=b||document;return JAK.DOM.arrayFromCollection(d.querySelectorAll("."+a))}for(var d=[],b=b||document,b=b.getElementsByTagName(c||"*"),c=b.length,a=RegExp("(^|\\s)"+a+"(\\s|$)"),e=0,f=0;e<c;e++)if(a.test(b[e].className)){d[f]=b[e];f++}return d};
JAK.DOM.arrayFromCollection=function(a){var b=[];try{b=Array.prototype.slice.call(a)}catch(c){for(var d=0;d<a.length;d++)b.push(a[d])}finally{return b}};JAK.DOM.separateCode=function(a){var b=[];return[a.replace(/<script.*?>([\s\S]*?)<\/script>/g,function(a,d){b.push(d);return""}),b.join("\n")]};
JAK.DOM.shiftBox=function(a){var b=0,c=0,d=JAK.DOM.getBoxPosition(a),e=JAK.DOM.getScrollPos();d.left=d.left-e.x;d.top=d.top-e.y;var e=JAK.DOM.getDocSize(),f=a.offsetWidth,a=d.top+a.offsetHeight-e.height;if(a>0){d.top=d.top-a;c=c-a}a=d.left+f-e.width;if(a>0){d.left=d.left-a;b=b-a}a=d.top;if(a<0){d.top=d.top-a;c=c-a}a=d.left;if(a<0){d.left=d.left-a;b=b-a}return[b,c]};
JAK.DOM.scrollbarWidth=function(){var a=JAK.mel("div",false,{width:"50px",height:"50px",overflow:"hidden",position:"absolute",left:"-200px"}),b=JAK.mel("div",false,{height:"100px"});a.appendChild(b);document.body.insertBefore(a,document.body.firstChild);b=a.clientWidth+parseInt(JAK.DOM.getStyle(a,"paddingLeft"))+parseInt(JAK.DOM.getStyle(a,"paddingRight"));JAK.DOM.setStyle(a,{overflowY:"scroll"});var c=a.clientWidth+parseInt(JAK.DOM.getStyle(a,"paddingLeft"))+parseInt(JAK.DOM.getStyle(a,"paddingRight"));
document.body.removeChild(a);return b-c};JAK.DOM.findParent=function(a,b){for(var c=(b||"").match(/[#.]?[a-z0-9_-]+/ig)||[],d=a.parentNode;d&&d!=document;){for(var e=true,f=0;f<c.length;f++){var g=c[f];switch(g.charAt(0)){case "#":d.id!=g.substring(1)&&(e=false);break;case ".":JAK.DOM.hasClass(d,g.substring(1))||(e=false);break;default:d.nodeName.toLowerCase()!=g.toLowerCase()&&(e=false)}}if(e)return d;d=d.parentNode}return null};JAK.ObjLib=JAK.ClassMaker.makeClass({NAME:"ObjLib",VERSION:"3.1"});
JAK.ObjLib.prototype.reSetOptions=function(){};JAK.ObjLib.prototype.pretty=function(a){return a};JAK.ObjLib.prototype.serialize=function(a){return JSON.stringify(a)};JAK.ObjLib.prototype.unserialize=function(a){return JSON.parse(a)};JAK.ObjLib.prototype.match=function(a,b){return JSON.stringify(a)==JSON.stringify(b)};JAK.ObjLib.prototype.copy=function(a){return JSON.parse(JSON.stringify(a))};JAK.ObjLib.prototype.arrayCopy=function(a){return this.copy(a)};
JAK.Request=JAK.ClassMaker.makeClass({NAME:"JAK.Request",VERSION:"2.0"});JAK.Request.XML=0;JAK.Request.TEXT=1;JAK.Request.JSONP=2;JAK.Request.BINARY=3;JAK.Request.supportsCrossOrigin=function(){return JAK.Browser.client=="opera"&&parseFloat(JAK.Browser.version)<12||JAK.Browser.client=="ie"&&JAK.Browser.version<8||JAK.Browser.client=="gecko"&&parseFloat(JAK.Browser.version)<3.5?false:true};JAK.Request.supportsUpload=function(){return window.XMLHttpRequest&&!!(new XMLHttpRequest).upload};
JAK.Request.prototype.$constructor=function(a,b){this._NEW=0;this._SENT=1;this._DONE=2;this._ABORTED=3;this._TIMEOUT=4;this._PROGRESS=5;this._xhr=null;this._callback="";this._script=null;this._type=a;this._headers={};this._callbacks={};this._state=this._NEW;this._handleProgress=this._xdomain=false;this._options={async:true,timeout:0,method:"get"};for(var c in b)this._options[c]=b[c];if(this._type==JAK.Request.JSONP){if(this._options.method.toLowerCase()=="post")throw Error("POST not supported in JSONP mode");
if(!this._options.async)throw Error("Async not supported in JSONP mode");}};JAK.Request.prototype.$destructor=function(){this._state==this._SENT&&this.abort();this._xhr=null};JAK.Request.prototype.setHeaders=function(a){if(this._type==JAK.Request.JSONP)throw Error("Request headers not supported in JSONP mode");for(var b in a)this._headers[b]=a[b]};
JAK.Request.prototype.getHeaders=function(){if(this._state!=this._DONE)throw Error("Response headers not available");if(this._type==JAK.Request.JSONP)throw Error("Response headers not supported in JSONP mode");var a={},b=this._xhr.getAllResponseHeaders();if(b)for(var b=b.split(/[\r\n]/),c=0;c<b.length;c++)if(b[c]){var d=b[c].match(/^([^:]+): *(.*)$/);a[d[1]]=d[2]}return a};
JAK.Request.prototype.send=function(a,b){if(this._state!=this._NEW)throw Error("Request already sent");this._state=this._SENT;this._userCallback(this);switch(this._type){case JAK.Request.XML:case JAK.Request.TEXT:case JAK.Request.BINARY:return this._sendXHR(a,b);case JAK.Request.JSONP:return this._sendScript(a,b);default:throw Error("Unknown request type");}};
JAK.Request.prototype.abort=function(){if(this._state!=this._SENT)return false;this._state=this._ABORTED;this._xhr&&this._xhr.abort();this._userCallback(this);return true};JAK.Request.prototype.setCallback=function(a,b){this._setCallback(a,b,this._DONE);return this};JAK.Request.prototype.setSendCallback=function(a,b){this._setCallback(a,b,this._SENT);return this};JAK.Request.prototype.setAbortCallback=function(a,b){this._setCallback(a,b,this._ABORTED);return this};
JAK.Request.prototype.setTimeoutCallback=function(a,b){this._setCallback(a,b,this._TIMEOUT);return this};JAK.Request.prototype.setProgressCallback=function(a,b){this._handleProgress=true;this._setCallback(a,b,this._PROGRESS);return this};JAK.Request.prototype._setCallback=function(a,b,c){this._callbacks[c]=[a,b]};
JAK.Request.prototype._sendXHR=function(a,b){if(window.XMLHttpRequest){var c=XMLHttpRequest,d=a.match(/^https?\:\/\/(.*?)\//);if(d&&d[1]!=location.host&&window.XDomainRequest){if(this._type==JAK.Request.BINARY)throw Error("XDomainRequest does not support BINARY mode");this._xdomain=true;c=XDomainRequest}this._xhr=new c}else if(window.ActiveXObject)this._xhr=new ActiveXObject("Microsoft.XMLHTTP");else throw Error("No XHR available");this._xdomain?this._xhr.onload=this._onXDomainRequestLoad.bind(this):
this._xhr.onreadystatechange=this._onReadyStateChange.bind(this);if(this._options.method.toLowerCase()=="get"){c=this._buildURL(a,b);d=null}else{var c=a,d=this._serializeData(b),e=false,f;for(f in this._headers)if(f.toLowerCase()=="content-type"){e=true;break}e||this.setHeaders({"Content-Type":"application/x-www-form-urlencoded"})}if(this._type==JAK.Request.BINARY)if(this._xhr.overrideMimeType)this._xhr.overrideMimeType("text/plain; charset=x-user-defined");else if(JAK.Browser.client=="ie")this._buildVBS();
else throw Error("This browser does not support binary transfer");this._handleProgress&&this._xhr.upload&&JAK.Events.addListener(this._xhr.upload,"progress",this,"_progressCallback");this._xhr.open(this._options.method,c,this._options.async);for(f in this._headers)this._xhr.setRequestHeader(f,this._headers[f]);this._xhr.send(d);this._options.timeout&&setTimeout(this._timeout.bind(this),this._options.timeout);this._options.async||this._onReadyStateChange();return c};
JAK.Request.prototype._sendScript=function(a,b){var c=b||{};this._callback="callback"+JAK.idGenerator();c.callback=this._callback;a=this._buildURL(a,c);window[this._callback]=this._scriptCallback.bind(this);this._script=JAK.mel("script",{type:"text/javascript",src:a});document.body.insertBefore(this._script,document.body.firstChild);return a};JAK.Request.prototype._buildURL=function(a,b){var c=this._serializeData(b);return!c.length?a:a.indexOf("?")==-1?a+"?"+c:a+"&"+c};
JAK.Request.prototype._serializeData=function(a){if(typeof a=="string"||window.File&&a instanceof File)return a;if(!a)return"";var b=[],c;for(c in a){var d=a[c];d instanceof Array||(d=[d]);for(var e=0;e<d.length;e++)b.push(encodeURIComponent(c)+"="+encodeURIComponent(d[e]))}return b.join("&")};
JAK.Request.prototype._onReadyStateChange=function(){if(this._state!=this._ABORTED&&this._xhr.readyState==4){var a=this._xhr.status,b;if(this._type==JAK.Request.BINARY){b=[];if(JAK.Browser.client=="ie")for(var c=VBS_getLength(this._xhr.responseBody),d=0;d<c;d++)b.push(VBS_getByte(this._xhr.responseBody,d));else for(var e=this._xhr.responseText,c=e.length,d=0;d<c;d++)b.push(e.charCodeAt(d)&255)}else b=this._type==JAK.Request.XML?this._xhr.responseXML:this._xhr.responseText;this._done(b,a)}};
JAK.Request.prototype._onXDomainRequestLoad=function(){if(this._state!=this._ABORTED){var a=this._xhr.responseText;if(this._type==JAK.Request.XML){var b=new ActiveXObject("Microsoft.XMLDOM");b.async=false;b.loadXML(a);a=b}this._done(a,200)}};JAK.Request.prototype._progressCallback=function(a){var a=a.loaded/a.total,b=this._state;this._state=this._PROGRESS;this._userCallback(a);this._state=b};
JAK.Request.prototype._scriptCallback=function(a){this._script.parentNode.removeChild(this._script);this._script=null;delete window[this._callback];this._state!=this._ABORTED&&this._done(a,200)};JAK.Request.prototype._done=function(a,b){if(this._state!=this._DONE){this._state=this._DONE;this._userCallback(a,b,this)}};JAK.Request.prototype._timeout=function(){if(this._state==this._SENT){this.abort();this._state=this._TIMEOUT;this._userCallback(this)}};
JAK.Request.prototype._userCallback=function(){var a=this._callbacks[this._state];if(a){var b=a[0]||window,a=a[1];b&&typeof a=="string"&&(a=b[a]);if(!a){a=b;b=window}a.apply(b,arguments)}};JAK.Request.prototype._buildVBS=function(){var a=JAK.mel("script",{type:"text/vbscript"});a.text="Function VBS_getByte(data, pos)\nVBS_getByte = AscB(MidB(data, pos+1,1))\nEnd Function\nFunction VBS_getLength(data)\nVBS_getLength = LenB(data)\nEnd Function";document.getElementsByTagName("head")[0].appendChild(a)};
JAK.Signals=JAK.ClassMaker.makeClass({NAME:"JAK.Signals",VERSION:"2.1"});JAK.Signals.prototype.$constructor=function(){this._myHandleFolder={};this._myIdFolder={}};
JAK.Signals.prototype.addListener=function(a,b,c,d){for(var e=JAK.idGenerator(),f=[],g={eOwner:a,eFunction:c,eSender:d},b=b.split(" "),i=0;i<b.length;i++){var j=b[i];j in this._myHandleFolder||(this._myHandleFolder[j]={});var j=this._myHandleFolder[j],k=true,h;for(h in j){var l=j[h];l.eFunction==c&&(l.eOwner==a&&l.eSender==d)&&(k=false)}if(k){j[e]=g;f.push(j)}}if(f.length){this._myIdFolder[e]=f;return e}return null};
JAK.Signals.prototype.removeListener=function(a){var b=this._myIdFolder[a];if(!b)throw Error("Cannot remove non-existent signal ID '"+a+"'");for(;b.length;)delete b.pop()[a];delete this._myIdFolder[a]};JAK.Signals.prototype.removeListeners=function(a){for(;a.length;)this.removeListener(a.shift())};JAK.Signals.prototype.makeEvent=function(a,b,c){this._myEventHandler({type:a,target:b,timeStamp:(new Date).getTime(),data:c&&typeof c=="object"?c:null})};
JAK.Signals.prototype._myEventHandler=function(a){var b=[],c;for(c in this._myHandleFolder)if(c==a.type||c=="*")for(var d in this._myHandleFolder[c]){var e=this._myHandleFolder[c][d];(!e.eSender||e.eSender==a.target)&&b.push(e)}for(c=0;c<b.length;c++){e=b[c];d=e.eOwner;e=e.eFunction;if(typeof e=="string")d[e](a);else typeof e=="function"&&e(a)}};JAK.signals=new JAK.Signals;JAK.ISignals=JAK.ClassMaker.makeInterface({NAME:"JAK.ISignals",VERSION:"2.1"});
JAK.ISignals.prototype.setInterface=function(a){if(typeof this[a]!="object"){for(var b=this._owner;typeof b[a]=="undefined";){if(typeof b.TOP_LEVEL!="undefined")throw Error("SetInterface:Interface not found");b=b._owner}return b[a]}};JAK.ISignals.prototype.addListener=function(a,b,c){return this.getInterface().addListener(this,a,b,c)};JAK.ISignals.prototype.removeListener=function(a){return this.getInterface().removeListener(a)};JAK.ISignals.prototype.removeListeners=function(a){this.getInterface().removeListeners(a)};
JAK.ISignals.prototype.makeEvent=function(a,b){this.getInterface().makeEvent(a,this,b)};JAK.ISignals.prototype.getInterface=function(){return typeof this.signals=="object"?this.signals:JAK.signals};JAK.AbstractDecorator=JAK.ClassMaker.makeSingleton({NAME:"JAK.AbstractDecorator",VERSION:"2.0"});JAK.AbstractDecorator.prototype.decorate=function(a){a.$super=this._$super;if(!a.__decorators)a.__decorators=[];a.__decorators.push(this);return a};
JAK.AbstractDecorator.prototype._$super=function(){var a=arguments.callee.caller;if(!a)throw Error("Function.prototype.caller not supported");for(var b=this.__decorators||[],c=null,d=null,e=b.length;e--;){var f=b[e];if(!c&&d&&d in f){c=f;break}for(var g in f)if(!d&&a==f[g]){d=g;break}}if(d){if(!c){c=this.constructor.prototype;if(!(d in c))throw Error("Function '"+d+"' has no undecorated parent");}}else{c=a.owner||this.constructor;b=false;for(d in c.prototype)c.prototype[d]==a&&(b=d);if(!b)throw Error("Cannot find supplied method in constructor");
a=c.EXTEND;if(!a)throw Error("No super-class available");if(!a.prototype[b])throw Error("Super-class doesn't have method '"+b+"'");return a.prototype[b].apply(this,arguments)}return c[d].apply(this,arguments)};JAK.AutoDecorator=JAK.ClassMaker.makeSingleton({NAME:"JAK.AutoDecorator",VERSION:"1.0",EXTEND:JAK.AbstractDecorator});JAK.AutoDecorator.prototype.decorate=function(a){this.$super(a);var b=["constructor","$super","_$super","decorate"],c;for(c in this)b.indexOf(c)==-1&&(a[c]=this[c])};
JAK.IDecorable=JAK.ClassMaker.makeClass({NAME:"JAK.IDecorable",VERSION:"2.0",CLASS:"class"});JAK.IDecorable.prototype.decorate=function(a){for(var b=[this],c=1;c<arguments.length;c++)b.push(arguments[c]);c=a.getInstance();return c.decorate.apply(c,b)};JAK.Timekeeper=JAK.ClassMaker.makeSingleton({NAME:"JAK.Timekeeper",VERSION:"1.1"});
JAK.Timekeeper.prototype.$constructor=function(){this._listeners=[];this._running=0;this._tick=this._tick.bind(this);this._scheduler=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,1E3/60)}};
JAK.Timekeeper.prototype.addListener=function(a,b,c){if(this._findListener(a)!=-1)throw Error("This listener is already attached");a={what:a,method:b,count:c||1,bucket:0};a.bucket=a.count;this._listeners.push(a);if(this._running!=2){this._running==0&&this._schedule();this._running=2}return this};
JAK.Timekeeper.prototype.removeListener=function(a){a=this._findListener(a);if(a==-1)throw Error("Cannot find listener to be removed");this._listeners.splice(a,1);if(!this._listeners.length)this._running=1;return this};JAK.Timekeeper.prototype._findListener=function(a){for(var b=0;b<this._listeners.length;b++)if(this._listeners[b].what==a)return b;return-1};
JAK.Timekeeper.prototype._tick=function(){if(this._running==1)this._running=0;if(this._running!=0){this._schedule();for(var a=0;a<this._listeners.length;a++){var b=this._listeners[a];b.bucket--;if(!b.bucket){b.bucket=b.count;var c=b.what;(typeof b.method=="string"?c[b.method]:b.method).call(c)}}}};JAK.Timekeeper.prototype._schedule=function(){var a=this._scheduler;a(this._tick,null)};JAK.C=JAK.ClassMaker.makeClass({NAME:"JAK.C",VERSION:"1.0",IMPLEMENT:JAK.ISignals});
JAK.C.prototype.$constructor=function(){this.LIMIT=1E3;this.DEBUG=false;this._native=window.console;this._data=[];this._lost=0;this._defineLogMethod("log");this._defineLogMethod("info");this._defineLogMethod("warn");this._defineLogMethod("debug");this._defineLogMethod("error");this._defineLogMethod("dir")};JAK.C.prototype.clear=function(){this._lost=0;this._data=[];this.makeEvent("change")};JAK.C.prototype.getLost=function(){return this._lost};JAK.C.prototype.getData=function(){return this._data};
JAK.C.prototype._defineLogMethod=function(a){var b=this;this[a]=function(){return b._log(a,arguments)}};JAK.C.prototype._log=function(a,b){for(this._data.push({type:a,args:b,ts:(new Date).getTime()});this._data.length>this.LIMIT;){this._data.shift();this._lost++}if(this.DEBUG&&this._native){var c=this._native[a];if(!c){c=this._native.log;if(!c)return}return Function.prototype.apply.call(c,this._native,b)}this.makeEvent("change")};window.console=new JAK.C;
window.onerror=function(a,b,c){console.error(a,b,c)};
